<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­—è¼¸å…¥ä¿®å¾©æ¸¬è©¦</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #dee2e6; border-radius: 8px; }
        .test-result { margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">ğŸ”§ æ•¸å­—è¼¸å…¥ä¿®å¾©æ¸¬è©¦é é¢</h1>
        
        <div class="alert alert-info">
            <h5>æ¸¬è©¦ç›®çš„</h5>
            <p>é©—è­‰å°‡ <code>type="number"</code> æ”¹ç‚º <code>type="text"</code> å¾Œï¼Œæ•¸å­—è¼¸å…¥æ¬„ä½æ˜¯å¦èƒ½æ­£å¸¸è™•ç†é€—è™Ÿæ ¼å¼åŒ–å’Œè¡¨å–®æäº¤ã€‚</p>
        </div>

        <!-- æ¸¬è©¦ 1: åŸºæœ¬æ•¸å­—è¼¸å…¥ -->
        <div class="test-section">
            <h4>ğŸ“ æ¸¬è©¦ 1: åŸºæœ¬æ•¸å­—è¼¸å…¥</h4>
            <form id="testForm1">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="testAmount1" class="form-label">é‡‘é¡è¼¸å…¥ (RMB)</label>
                            <input type="text" class="form-control" id="testAmount1" name="amount" 
                                   pattern="[0-9]*\.?[0-9]*" placeholder="è«‹è¼¸å…¥é‡‘é¡">
                            <div class="form-text">è¼¸å…¥æ•¸å­—æ™‚æœƒè‡ªå‹•æ·»åŠ é€—è™Ÿæ ¼å¼åŒ–</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="testRate1" class="form-label">åŒ¯ç‡è¼¸å…¥</label>
                            <input type="text" class="form-control" id="testRate1" name="rate" 
                                   pattern="[0-9]*\.?[0-9]*" placeholder="è«‹è¼¸å…¥åŒ¯ç‡">
                            <div class="form-text">æ”¯æ´4ä½å°æ•¸çš„åŒ¯ç‡è¼¸å…¥</div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">æ¸¬è©¦è¡¨å–®æäº¤</button>
            </form>
            <div id="result1" class="test-result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 2: å¤§æ•¸å­—è¼¸å…¥ -->
        <div class="test-section">
            <h4>ğŸ’° æ¸¬è©¦ 2: å¤§æ•¸å­—è¼¸å…¥</h4>
            <form id="testForm2">
                <div class="mb-3">
                    <label for="testLargeAmount" class="form-label">å¤§é‡‘é¡è¼¸å…¥</label>
                    <input type="text" class="form-control" id="testLargeAmount" name="large_amount" 
                           pattern="[0-9]*\.?[0-9]*" placeholder="ä¾‹å¦‚: 1000000">
                    <div class="form-text">è¼¸å…¥ 1000000 æ‡‰è©²é¡¯ç¤ºç‚º 1,000,000.00</div>
                </div>
                <button type="submit" class="btn btn-success">æ¸¬è©¦å¤§æ•¸å­—</button>
            </form>
            <div id="result2" class="test-result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 3: å°æ•¸è¼¸å…¥ -->
        <div class="test-section">
            <h4>ğŸ”¢ æ¸¬è©¦ 3: å°æ•¸è¼¸å…¥</h4>
            <form id="testForm3">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="testDecimal1" class="form-label">å°æ•¸é‡‘é¡</label>
                            <input type="text" class="form-control" id="testDecimal1" name="decimal1" 
                                   pattern="[0-9]*\.?[0-9]*" placeholder="ä¾‹å¦‚: 123.45">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="testDecimal2" class="form-label">ç²¾ç¢ºåŒ¯ç‡</label>
                            <input type="text" class="form-control" id="testDecimal2" name="decimal2" 
                                   pattern="[0-9]*\.?[0-9]*" placeholder="ä¾‹å¦‚: 4.5678">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-warning">æ¸¬è©¦å°æ•¸</button>
            </form>
            <div id="result3" class="test-result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 4: è¡¨å–®é©—è­‰ -->
        <div class="test-section">
            <h4>âœ… æ¸¬è©¦ 4: è¡¨å–®é©—è­‰</h4>
            <form id="testForm4">
                <div class="mb-3">
                    <label for="testValidation" class="form-label">é©—è­‰è¼¸å…¥</label>
                    <input type="text" class="form-control" id="testValidation" name="validation" 
                           pattern="[0-9]*\.?[0-9]*" required>
                    <div class="form-text">å˜—è©¦è¼¸å…¥ç„¡æ•ˆå­—ç¬¦ï¼ˆå¦‚å­—æ¯ï¼‰æ‡‰è©²è¢«é˜»æ­¢</div>
                </div>
                <button type="submit" class="btn btn-danger">æ¸¬è©¦é©—è­‰</button>
            </form>
            <div id="result4" class="test-result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦çµæœç¸½è¦½ -->
        <div class="test-section">
            <h4>ğŸ“Š æ¸¬è©¦çµæœç¸½è¦½</h4>
            <div id="overallResult" class="test-result">
                <p>é»æ“Šä¸Šæ–¹æ¸¬è©¦æŒ‰éˆ•ä¾†æŸ¥çœ‹çµæœ...</p>
            </div>
        </div>
    </div>

    <!-- å¢å¼·çš„æ•¸å­—è¼¸å…¥è™•ç†è…³æœ¬ -->
    <script src="static/js/enhanced_number_input.js"></script>
    
    <script>
        // æ¸¬è©¦çµæœè¨˜éŒ„
        let testResults = {
            test1: false,
            test2: false,
            test3: false,
            test4: false
        };

        // é¡¯ç¤ºæ¸¬è©¦çµæœ
        function showResult(testId, success, message) {
            const resultDiv = document.getElementById(`result${testId.slice(-1)}`);
            resultDiv.style.display = 'block';
            resultDiv.className = `test-result ${success ? 'success' : 'error'}`;
            resultDiv.innerHTML = `<strong>${success ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}:</strong> ${message}`;
            
            // è¨˜éŒ„çµæœ
            testResults[testId] = success;
            updateOverallResult();
        }

        // æ›´æ–°ç¸½é«”çµæœ
        function updateOverallResult() {
            const overallDiv = document.getElementById('overallResult');
            const passedTests = Object.values(testResults).filter(Boolean).length;
            const totalTests = Object.keys(testResults).length;
            
            if (passedTests === totalTests) {
                overallDiv.className = 'test-result success';
                overallDiv.innerHTML = `
                    <h5>ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼</h5>
                    <p>æ•¸å­—è¼¸å…¥ä¿®å¾©æˆåŠŸï¼š</p>
                    <ul>
                        <li>âœ… æ”¯æ´é€—è™Ÿæ ¼å¼åŒ–</li>
                        <li>âœ… è¡¨å–®æäº¤æ­£å¸¸</li>
                        <li>âœ… æ•¸å­—é©—è­‰æœ‰æ•ˆ</li>
                        <li>âœ… å°æ•¸é»è™•ç†æ­£ç¢º</li>
                    </ul>
                `;
            } else {
                overallDiv.className = 'test-result error';
                overallDiv.innerHTML = `
                    <h5>âš ï¸ éƒ¨åˆ†æ¸¬è©¦å¤±æ•—</h5>
                    <p>é€šéæ¸¬è©¦: ${passedTests}/${totalTests}</p>
                    <p>è«‹æª¢æŸ¥å¤±æ•—çš„æ¸¬è©¦é …ç›®</p>
                `;
            }
        }

        // æ¸¬è©¦ 1: åŸºæœ¬æ•¸å­—è¼¸å…¥
        document.getElementById('testForm1').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = document.getElementById('testAmount1').value;
            const rate = document.getElementById('testRate1').value;
            
            if (amount && rate) {
                showResult('test1', true, `æˆåŠŸæäº¤ï¼šé‡‘é¡=${amount}, åŒ¯ç‡=${rate}`);
            } else {
                showResult('test1', false, 'è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½');
            }
        });

        // æ¸¬è©¦ 2: å¤§æ•¸å­—è¼¸å…¥
        document.getElementById('testForm2').addEventListener('submit', function(e) {
            e.preventDefault();
            const amount = document.getElementById('testLargeAmount').value;
            
            if (amount && amount.includes(',')) {
                showResult('test2', true, `å¤§æ•¸å­—æ ¼å¼åŒ–æˆåŠŸï¼š${amount}`);
            } else {
                showResult('test2', false, 'å¤§æ•¸å­—æ ¼å¼åŒ–å¤±æ•—');
            }
        });

        // æ¸¬è©¦ 3: å°æ•¸è¼¸å…¥
        document.getElementById('testForm3').addEventListener('submit', function(e) {
            e.preventDefault();
            const decimal1 = document.getElementById('testDecimal1').value;
            const decimal2 = document.getElementById('testDecimal2').value;
            
            if (decimal1 && decimal2) {
                showResult('test3', true, `å°æ•¸è¼¸å…¥æˆåŠŸï¼š${decimal1}, ${decimal2}`);
            } else {
                showResult('test3', false, 'è«‹å¡«å¯«å°æ•¸æ¬„ä½');
            }
        });

        // æ¸¬è©¦ 4: è¡¨å–®é©—è­‰
        document.getElementById('testForm4').addEventListener('submit', function(e) {
            e.preventDefault();
            const value = document.getElementById('testValidation').value;
            
            if (value && /^\d*\.?\d*$/.test(value)) {
                showResult('test4', true, `æ•¸å­—é©—è­‰é€šéï¼š${value}`);
            } else {
                showResult('test4', false, 'æ•¸å­—é©—è­‰å¤±æ•—');
            }
        });

        // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ æ•¸å­—è¼¸å…¥ä¿®å¾©æ¸¬è©¦é é¢å·²è¼‰å…¥');
            
            // è‡ªå‹•å¡«å……ä¸€äº›æ¸¬è©¦æ•¸æ“š
            setTimeout(() => {
                document.getElementById('testAmount1').value = '1000';
                document.getElementById('testRate1').value = '4.5';
                document.getElementById('testLargeAmount').value = '1000000';
                document.getElementById('testDecimal1').value = '123.45';
                document.getElementById('testDecimal2').value = '4.5678';
                document.getElementById('testValidation').value = '100';
            }, 1000);
        });
    </script>
</body>
</html>
