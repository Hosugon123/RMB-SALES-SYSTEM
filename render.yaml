# Render 服務配置檔案
services:
  # Web Service (主應用程式)
  - type: web
    name: rmb-sales-system
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app
    envVars:
      - key: FLASK_ENV
        value: production
        sync: false
      - key: DATABASE_URL
        sync: false
      - key: SECRET_KEY
        sync: false

  # Cron Job (定時任務)
  - type: cron
    name: dealsys-cron
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python render_cron_job.py
    schedule: "0 2 * * *"  # 每天 UTC 凌晨 2 點執行
    envVars:
      - key: GOOGLE_APPLICATION_CREDENTIALS
        sync: false
      - key: GCS_BUCKET_NAME
        sync: false
      - key: TARGET_URL
        value: "https://rmb-sales-system-test1.onrender.com"
        sync: false