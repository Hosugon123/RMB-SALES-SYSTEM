<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŠ·å¸³åŠŸèƒ½æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
        input, select { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 3px; }
        .form-group { margin: 10px 0; }
        label { display: inline-block; width: 120px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª éŠ·å¸³åŠŸèƒ½æ¸¬è©¦é é¢</h1>
    
    <div class="test-section info">
        <h3>ğŸ“‹ æ¸¬è©¦èªªæ˜</h3>
        <p>æ­¤é é¢ç”¨æ–¼æ¸¬è©¦éŠ·å¸³åŠŸèƒ½çš„å‰ç«¯é‚è¼¯ï¼ŒåŒ…æ‹¬ï¼š</p>
        <ul>
            <li>è¡¨å–®æ•¸æ“šé©—è­‰</li>
            <li>éš±è—æ¬„ä½è¨­ç½®</li>
            <li>API è«‹æ±‚æ¨¡æ“¬</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h3>ğŸ”§ è¡¨å–®æ•¸æ“šé©—è­‰æ¸¬è©¦</h3>
        <div class="form-group">
            <label>å®¢æˆ¶ID:</label>
            <input type="text" id="testCustomerId" value="1" placeholder="å®¢æˆ¶ID">
        </div>
        <div class="form-group">
            <label>éŠ·å¸³é‡‘é¡:</label>
            <input type="number" id="testAmount" value="1000" step="0.01" placeholder="éŠ·å¸³é‡‘é¡">
        </div>
        <div class="form-group">
            <label>æ”¶æ¬¾å¸³æˆ¶ID:</label>
            <input type="text" id="testAccountId" value="29" placeholder="æ”¶æ¬¾å¸³æˆ¶ID">
        </div>
        <div class="form-group">
            <label>å‚™è¨»:</label>
            <input type="text" id="testNote" value="æ¸¬è©¦éŠ·å¸³" placeholder="å‚™è¨»">
        </div>
        <button class="btn-primary" onclick="testValidation()">æ¸¬è©¦é©—è­‰é‚è¼¯</button>
        <button class="btn-success" onclick="testFormSubmission()">æ¸¬è©¦è¡¨å–®æäº¤</button>
    </div>
    
    <div class="test-section">
        <h3>ğŸ“Š æ¸¬è©¦çµæœ</h3>
        <div id="testResults"></div>
    </div>
    
    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('testResults');
            const div = document.createElement('div');
            div.className = `test-section ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
            console.log(message);
        }
        
        function testValidation() {
            log('ğŸ§ª é–‹å§‹æ¸¬è©¦è¡¨å–®é©—è­‰é‚è¼¯...', 'info');
            
            // ç²å–æ¸¬è©¦æ•¸æ“š
            const customerId = document.getElementById('testCustomerId').value;
            const amount = parseFloat(document.getElementById('testAmount').value);
            const accountId = document.getElementById('testAccountId').value;
            const note = document.getElementById('testNote').value;
            
            log(`ğŸ“‹ æ¸¬è©¦æ•¸æ“š: å®¢æˆ¶ID=${customerId}, é‡‘é¡=${amount}, å¸³æˆ¶ID=${accountId}, å‚™è¨»=${note}`, 'info');
            
            // é©—è­‰é‚è¼¯
            let isValid = true;
            
            if (!customerId) {
                log('âŒ å®¢æˆ¶IDç¼ºå¤±', 'error');
                isValid = false;
            }
            
            if (!accountId) {
                log('âŒ æ”¶æ¬¾å¸³æˆ¶IDç¼ºå¤±', 'error');
                isValid = false;
            }
            
            if (isNaN(amount)) {
                log('âŒ éŠ·å¸³é‡‘é¡æ ¼å¼éŒ¯èª¤', 'error');
                isValid = false;
            }
            
            if (amount <= 0) {
                log('âŒ éŠ·å¸³é‡‘é¡å¿…é ˆå¤§æ–¼0', 'error');
                isValid = false;
            }
            
            if (isValid) {
                log('âœ… è¡¨å–®é©—è­‰é€šé', 'success');
            } else {
                log('âŒ è¡¨å–®é©—è­‰å¤±æ•—', 'error');
            }
        }
        
        function testFormSubmission() {
            log('ğŸš€ é–‹å§‹æ¸¬è©¦è¡¨å–®æäº¤...', 'info');
            
            // ç²å–æ¸¬è©¦æ•¸æ“š
            const customerId = document.getElementById('testCustomerId').value;
            const amount = parseFloat(document.getElementById('testAmount').value);
            const accountId = document.getElementById('testAccountId').value;
            const note = document.getElementById('testNote').value;
            
            // æ¨¡æ“¬APIè«‹æ±‚
            const requestData = {
                customer_id: customerId,
                amount: amount,
                account_id: accountId,
                note: note
            };
            
            log(`ğŸ“¤ ç™¼é€APIè«‹æ±‚: ${JSON.stringify(requestData)}`, 'info');
            
            // æ¨¡æ“¬æˆåŠŸå›æ‡‰
            setTimeout(() => {
                const mockResponse = {
                    status: 'success',
                    message: `éŠ·å¸³æˆåŠŸï¼å®¢æˆ¶å·²æ”¶æ¬¾ NT$ ${amount.toLocaleString('en-US', {minimumFractionDigits: 2})}`
                };
                
                log(`ğŸ“¥ æ”¶åˆ°å›æ‡‰: ${JSON.stringify(mockResponse)}`, 'success');
                log('âœ… éŠ·å¸³æ“ä½œæ¨¡æ“¬æˆåŠŸ', 'success');
            }, 1000);
        }
        
        // é é¢è¼‰å…¥å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ éŠ·å¸³åŠŸèƒ½æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ', 'success');
        });
    </script>
</body>
</html>
