{% extends "base.html" %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h2 class="mb-4">è¨­å®šäººæ°‘å¹£è²·è³£åŒ¯ç‡</h2>
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">ç•¶å‰åŒ¯ç‡è³‡è¨Š</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">ç•¶å‰è²·å…¥åŒ¯ç‡ (æˆ‘å€‘å‘æ‚¨æ¡è³¼äººæ°‘å¹£): <strong class="fs-5">NTD {{ "%.2f"|format(buy_rate) }}</strong></p>
                    <p class="card-text">ç•¶å‰è³£å‡ºåŒ¯ç‡ (æ‚¨å‘æˆ‘å€‘æ¡è³¼äººæ°‘å¹£): <strong class="fs-5">NTD {{ "%.2f"|format(sell_rate) }}</strong></p>
                </div>
            </div>

            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">æ›´æ–°åŒ¯ç‡</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label for="buy_rate" class="form-label">è¨­å®šäººæ°‘å¹£è²·å…¥åŒ¯ç‡ (æˆ‘å€‘å‘æ‚¨æ¡è³¼äººæ°‘å¹£ï¼ŒNTD/RMB):</label>
                            <input type="text" class="form-control" id="buy_rate" name="buy_rate" pattern="[0-9]*\.?[0-9]*" value="{{ '%.4f'|format(buy_rate) }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="sell_rate" class="form-label">è¨­å®šäººæ°‘å¹£è³£å‡ºåŒ¯ç‡ (æ‚¨å‘æˆ‘å€‘æ¡è³¼äººæ°‘å¹£ï¼ŒNTD/RMB):</label>
                            <input type="text" class="form-control" id="sell_rate" name="sell_rate" pattern="[0-9]*\.?[0-9]*" value="{{ '%.4f'|format(sell_rate) }}" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">æ›´æ–°åŒ¯ç‡</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸš€ åŒ¯ç‡è¨­å®šé é¢å·²è¼‰å…¥');
    
    // åˆå§‹åŒ–æ•¸å­—è¼¸å…¥æ¬„ä½çš„æ ¼å¼åŒ–
    function initializeNumberFormatting() {
        const buyRateInput = document.getElementById('buy_rate');
        const sellRateInput = document.getElementById('sell_rate');
        
        if (buyRateInput) {
            setupNumberInputFormatting(buyRateInput, { maxDecimals: 4 });
            console.log('âœ… è²·å…¥åŒ¯ç‡æ¬„ä½æ ¼å¼åŒ–å·²åˆå§‹åŒ–');
        }
        
        if (sellRateInput) {
            setupNumberInputFormatting(sellRateInput, { maxDecimals: 4 });
            console.log('âœ… è³£å‡ºåŒ¯ç‡æ¬„ä½æ ¼å¼åŒ–å·²åˆå§‹åŒ–');
        }
    }
    
    // åˆå§‹åŒ–æ•¸å­—æ ¼å¼åŒ–
    initializeNumberFormatting();
});
</script>
{% endblock %}