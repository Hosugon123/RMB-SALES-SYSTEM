<div class="modal fade" id="addHolderModal" tabindex="-1" aria-labelledby="addHolderModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="{{ url_for('admin_update_cash_account') }}" method="POST">
        <input type="hidden" name="action" value="add_holder">
        <div class="modal-header">
          <h5 class="modal-title" id="addHolderModalLabel">新增資金持有人</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="mb-3">
                <label for="holderName" class="form-label">持有人名稱</label>
                <input type="text" class="form-control" id="holderName" name="name" required>
            </div>
            <!-- 我們已經將「持有人類型」的下拉選單徹底移除 -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="submit" class="btn btn-success">確認新增</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- 2. 新增現金帳戶 Modal -->
<div class="modal fade" id="addAccountModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_cash_account') }}" method="POST"><input type="hidden" name="action"
                    value="add_account">
                <div class="modal-header">
                    <h5 class="modal-title">新增現金帳戶</h5><button type="button" class="btn-close"
                        data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3"><label for="accountHolder" class="form-label">歸屬於哪個持有人？</label><select
                            class="form-select" id="accountHolder" name="holder_id" required></select></div>
                    <div class="mb-3"><label for="accountName" class="form-label">帳戶名稱</label><input type="text"
                            class="form-control" id="accountName" name="name" required></div>
                    <div class="mb-3"><label for="accountCurrency" class="form-label">幣別</label><select
                            class="form-select" id="accountCurrency" name="currency" required>
                            <option value="TWD">台幣 (TWD)</option>
                            <option value="RMB">人民幣 (RMB)</option>
                        </select></div>
                    <div class="mb-3"><label for="initialBalance" class="form-label">初始餘額</label><input type="number"
                            step="0.01" class="form-control" id="initialBalance" name="initial_balance" value="0.00"
                            required></div>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">取消</button><button type="submit" class="btn btn-primary">確認新增</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 3. 內部轉帳 Modal -->
<div class="modal fade" id="transferModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_cash_account') }}" method="POST"><input type="hidden" name="action"
                    value="transfer_funds">
                <div class="modal-header">
                    <h5 class="modal-title">內部資金轉帳</h5><button type="button" class="btn-close"
                        data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3"><label for="fromAccount" class="form-label">從哪個帳戶轉出？</label><select
                            class="form-select" id="fromAccount" name="from_account_id" required></select></div>
                    <div class="mb-3"><label for="toAccount" class="form-label">轉入哪個帳戶？</label><select
                            class="form-select" id="toAccount" name="to_account_id" required></select></div>
                    <div class="mb-3"><label for="transferAmount" class="form-label">轉帳金額</label><input type="number"
                            step="0.01" class="form-control" id="transferAmount" name="transfer_amount" required></div>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">取消</button><button type="submit" class="btn btn-warning">確認轉帳</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 4. 存入/提出 Modal -->
<div class="modal fade" id="addMovementModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_cash_account') }}" method="POST"><input type="hidden" name="action"
                    value="add_movement"><input type="hidden" id="movementAccountId" name="account_id">
                <div class="modal-header">
                    <h5 class="modal-title" id="movementModalTitle">資金操作</h5><button type="button" class="btn-close"
                        data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3"><label class="form-label d-block">操作類型</label>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio"
                                name="is_decrease" id="movementDeposit" value="false" checked><label
                                class="form-check-label" for="movementDeposit">存入 (+)</label></div>
                        <div class="form-check form-check-inline"><input class="form-check-input" type="radio"
                                name="is_decrease" id="movementWithdraw" value="true"><label class="form-check-label"
                                for="movementWithdraw">提出 (-)</label></div>
                    </div>
                    <div class="mb-3"><label for="movementAmount" class="form-label">金額</label><input type="number"
                            step="0.01" class="form-control" id="movementAmount" name="amount" required></div>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">取消</button><button type="submit" class="btn btn-info">確認執行</button>
                </div>
            </form>
        </div>
    </div>
</div>